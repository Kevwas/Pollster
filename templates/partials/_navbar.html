<style>
	.navbar {
		position : fixed;
        top: 0;
		margin-left: 0;
		width: 100%;
		z-index: 999;
		transition: top 0.3s;
	}

	.show {
		background-color: white;
		position: fixed;
		right: 13px;
		top: 80px;
		padding: 10px;
		border-radius: 10px;
	}
</style>

<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom" style="background-color: #32adff">
	{% if not request.user.is_authenticated %}
		<a class="navbar-brand text-light mr-auto" href="{% url 'polls:index' %}"
			style="
				background: #007bff;
				background: linear-gradient(to right, #3573c4, #33AEFF);
				border: 1px solid black;
				padding: 7px;
				border-radius: 7px;
			"
		>
			<strong>POLLSTER</strong>
		</a>
	{% else %}
		<a class="navbar-brand text-light ml-3 mr-4" href="{% url 'polls:index' %}"
			style="
				background: #007bff;
				background: linear-gradient(to right, #3573c4, #33AEFF);
				border: 1px solid black;
				padding: 7px;
				border-radius: 7px;
			"
		>
			<strong>POLLSTER</strong>
		</a>
		{% include 'partials/_burger_button.html' %}
	{% endif %}

	<div id="navbarContent" class="ml-auto">
		{% if not request.user.is_authenticated %}
			<ul class="navbar-nav d-flex flex-row">
				{% if not "/polls/" in request.path %}
					<li class="nav-item active p-2">
						<a class="nav-link" href="{% url 'polls:polls' page=1 %}"><strong>Polls</strong> <span class="sr-only">(current)</span></a>
					</li>
				{% endif %}
				{% if request.path == "/login/"%}
					<li class="nav-item p-2">
						<a class="nav-link" href="{% url 'accounts:register' %}"><strong>Register</strong></a>
					</li>
				{% elif request.path == "/register/"%}
					<li class="nav-item p-2">
						<a class="nav-link" href="{% url 'accounts:login' %}"><strong>Login</strong></a>
					</li>
				{% else %}
					<li class="nav-item p-2">
						<a class="nav-link" href="{% url 'accounts:login' %}"><strong>Login</strong></a>
					</li>
					<li class="nav-item p-2">
						<a class="nav-link" href="{% url 'accounts:register' %}"><strong>Register</strong></a>
					</li>
				{% endif %}
			</ul>
		{% else %}
			<div class="collapse navbar-collapse">
				<span class="navbar-text text-dark">
					Hello, <strong>{{ request.user }}</strong>
				</span>
				<span>
					<a class="navbar-text text-info" style="margin-left: 20px; margin-right: 20px;" href="{% url 'accounts:logout' %}"><strong>Logout</strong></a>
				</span>
			</div>
		{% endif %}
	</div>
</nav>

<script>
	var prevScrollpos = window.pageYOffset;
	window.onscroll = function() {
		var currentScrollPos = window.pageYOffset;
		if (prevScrollpos > currentScrollPos) {
			document.querySelector(".navbar").style.top = "0";
			if (document.getElementById("user-image")) {
				document.getElementById("user-image").style.marginTop = "80px";
			}
		} else {
			document.querySelector(".navbar").style.top = "-80px";
			if (document.getElementById("user-image")) {
				document.getElementById("user-image").style.marginTop = "0";
			}
		}
		prevScrollpos = currentScrollPos;
	}
</script>
